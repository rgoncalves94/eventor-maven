<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
		xmlns:f="http://java.sun.com/jsf/core"
		xmlns:h="http://java.sun.com/jsf/html"
		xmlns:p="http://primefaces.org/ui"
		xmlns:ui="http://java.sun.com/jsf/facelets">
    <h:body>
 
    	<ui:composition template="/WEB-INF/templates/layout.xhtml">
 
    		<ui:define name="content">
   				<div class="col-sm-3">
   					<div class="info-box">
		            <span class="info-box-icon bg-aqua"><i class="fa fa-calendar"></i></span>
		
		            <div class="info-box-content">
		              <span class="info-box-text">Total Eventos</span>
		              <span class="info-box-number">#{eventoMB.totalEventos()}</span>
		            </div>
		            <!-- /.info-box-content -->
		          </div>
   				</div>
   				<div class="col-sm-12">
	    			<h2>Ultimos Eventos</h2>
	    			<p:dataTable var="evento" value="#{eventoMB.listaEventos()}">
	    			
					    <p:column headerText="#">
					        <h:outputText value="#{evento.id}" />
					    </p:column>
					    
					    <p:column headerText="Criado em">
					        <h:outputText value="#{evento.dtCadastro}" >
					        	<f:convertDateTime pattern="dd/MM/YYYY" />
					        </h:outputText>
					    </p:column>
					 
					    <p:column headerText="Titulo">
					        <h:outputText value="#{evento.titulo}" />
					    </p:column>
					 
					    <p:column headerText="Tipos de Ingressos">
					        <h:outputText value="#{evento.ingressos.size()}" />
					    </p:column>
					    
					    <p:column class="text-center" headerText="Ações">
					        <h:form>
					        	<p:commandButton value="Editar" actionListener="#{eventoMB.edita(evento.id)}" ajax="false" />
					        </h:form>
					        <h:form>
					        	<p:commandButton value="Relatório" actionListener="#{relatorioMB.carregaRelatorio(evento.id)}" ajax="false" />
					        </h:form>
					    </p:column>
					</p:dataTable>
				</div>
	    	</ui:define>
    	</ui:composition>
 
    </h:body>
 
</html>